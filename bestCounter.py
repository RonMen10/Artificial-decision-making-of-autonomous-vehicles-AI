import pickle
import pandas as pd

parameter_list = [(0.05, 0.05, 0.05, 0.05), (0.05, 0.05, 0.05, 0.1), (0.05, 0.05, 0.05, 0.2), (0.05, 0.05, 0.1, 0.05), (0.05, 0.05, 0.1, 0.1), (0.05, 0.05, 0.1, 0.2), (0.05, 0.05, 0.2, 0.05), (0.05, 0.05, 0.2, 0.1), (0.05, 0.05, 0.2, 0.2), (0.05, 0.025, 0.05, 0.05), (0.05, 0.025, 0.05, 0.1), (0.05, 0.025, 0.05, 0.2), (0.05, 0.025, 0.1, 0.05), (0.05, 0.025, 0.1, 0.1), (0.05, 0.025, 0.1, 0.2), (0.05, 0.025, 0.2, 0.05), (0.05, 0.025, 0.2, 0.1), (0.05, 0.025, 0.2, 0.2), (0.05, 0.075, 0.05, 0.05), (0.05, 0.075, 0.05, 0.1), (0.05, 0.075, 0.05, 0.2), (0.05, 0.075, 0.1, 0.05), (0.05, 0.075, 0.1, 0.1), (0.05, 0.075, 0.1, 0.2), (0.05, 0.075, 0.2, 0.05), (0.05, 0.075, 0.2, 0.1), (0.05, 0.075, 0.2, 0.2), (0.1, 0.05, 0.05, 0.05), (0.1, 0.05, 0.05, 0.1), (0.1, 0.05, 0.05, 0.2), (0.1, 0.05, 0.1, 0.05), (0.1, 0.05, 0.1, 0.1), (0.1, 0.05, 0.1, 0.2), (0.1, 0.05, 0.2, 0.05), (0.1, 0.05, 0.2, 0.1), (0.1, 0.05, 0.2, 0.2), (0.1, 0.025, 0.05, 0.05), (0.1, 0.025, 0.05, 0.1), (0.1, 0.025, 0.05, 0.2), (0.1, 0.025, 0.1, 0.05), (0.1, 0.025, 0.1, 0.1), (0.1, 0.025, 0.1, 0.2), (0.1, 0.025, 0.2, 0.05), (0.1, 0.025, 0.2, 0.1), (0.1, 0.025, 0.2, 0.2), (0.1, 0.075, 0.05, 0.05), (0.1, 0.075, 0.05, 0.1), (0.1, 0.075, 0.05, 0.2), (0.1, 0.075, 0.1, 0.05), (0.1, 0.075, 0.1, 0.1), (0.1, 0.075, 0.1, 0.2), (0.1, 0.075, 0.2, 0.05), (0.1, 0.075, 0.2, 0.1), (0.1, 0.075, 0.2, 0.2), (0.2, 0.05, 0.05, 0.05), (0.2, 0.05, 0.05, 0.1), (0.2, 0.05, 0.05, 0.2), (0.2, 0.05, 0.1, 0.05), (0.2, 0.05, 0.1, 0.1), (0.2, 0.05, 0.1, 0.2), (0.2, 0.05, 0.2, 0.05), (0.2, 0.05, 0.2, 0.1), (0.2, 0.05, 0.2, 0.2), (0.2, 0.025, 0.05, 0.05), (0.2, 0.025, 0.05, 0.1), (0.2, 0.025, 0.05, 0.2), (0.2, 0.025, 0.1, 0.05), (0.2, 0.025, 0.1, 0.1), (0.2, 0.025, 0.1, 0.2), (0.2, 0.025, 0.2, 0.05), (0.2, 0.025, 0.2, 0.1), (0.2, 0.025, 0.2, 0.2), (0.2, 0.075, 0.05, 0.05), (0.2, 0.075, 0.05, 0.1), (0.2, 0.075, 0.05, 0.2), (0.2, 0.075, 0.1, 0.05), (0.2, 0.075, 0.1, 0.1), (0.2, 0.075, 0.1, 0.2), (0.2, 0.075, 0.2, 0.05), (0.2, 0.075, 0.2, 0.1), (0.2, 0.075, 0.2, 0.2)]
counter_list = []
for parameters in parameter_list:
    archive=pickle.load(open('C:/GitHub/Collective-Decision-Making/test/Archives/{}_{}_{}_{}.pkl'.format(parameters[0],parameters[1],parameters[2],parameters[3]), 'rb'))
    df = pd.DataFrame(archive)
    temp_df = df.loc[:, ['hypervolume', 'first_risk', 'avgFitness', 'counter']]
    counter_list.append(temp_df.sort_values("avgFitness").groupby(['hypervolume', 'first_risk'], as_index=False).first()['counter'].mean())
df = pd.DataFrame({'Run': parameter_list,
                    'Avg Best Counter': counter_list})

df.to_csv('BestCounters.csv')